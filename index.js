const cors = require('cors');
const express = require('express'); const fileUpload = require('express-fileupload'); const path = require('path'); const fs = require('fs'); const app = express();  app.use(fileUpload()); app.use(express.static(path.join(__dirname, 'uploads')));  app.post('/upload', (req, res) => {   if (!req.files || !req.files.video) return res.status(400).send({ message: 'No video uploaded' });   let video = req.files.video;   let uploadPath = path.join(__dirname, 'uploads', video.name);    video.mv(uploadPath, (err) => {     if (err) return res.status(500).send(err);     res.send({ message: 'Upload successful', filename: video.name });   }); });  // API ya kuorodhesha video files app.get('/videos', (req, res) => {   const uploadsDir = path.join(__dirname, 'uploads');   fs.readdir(uploadsDir, (err, files) => {     if (err) {       console.error('Error reading uploads directory:', err);       return res.status(500).json({ error: 'Failed to list videos' });     }     const videoFiles = files.filter(file => /\.(mp4|mov|avi|mkv)$/i.test(file));     res.json(videoFiles);   }); });  const PORT = process.env.PORT || 10000; app.listen(PORT, () => console.log(`Server running on port ${PORT}`));
